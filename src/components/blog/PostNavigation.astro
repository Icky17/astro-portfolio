---
import { info } from "@data";
import type { IBlogPost } from "@types";

const { currentSlug } = Astro.props;

// Sort posts by date
const sortedPosts = info.blog.sort((a, b) => 
  new Date(b.date).getTime() - new Date(a.date).getTime()
);

const currentIndex = sortedPosts.findIndex(post => post.slug === currentSlug);
const prevPost = currentIndex < sortedPosts.length - 1 ? sortedPosts[currentIndex + 1] : null;
const nextPost = currentIndex > 0 ? sortedPosts[currentIndex - 1] : null;
---

<nav class="flex justify-between items-center mt-16 py-8 border-t dark:border-gray-700">
  {prevPost ? (
    <a href={`/blog/${prevPost.slug}`} class="group flex items-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 group-hover:transform group-hover:-translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      <div>
        <span class="block text-sm text-gray-500 dark:text-gray-400">Previous</span>
        <span class="block dark:text-light">{prevPost.title}</span>
      </div>
    </a>
  ) : <div></div>}
  
  {nextPost ? (
    <a href={`/blog/${nextPost.slug}`} class="group flex items-center text-right">
      <div>
        <span class="block text-sm text-gray-500 dark:text-gray-400">Next</span>
        <span class="block dark:text-light">{nextPost.title}</span>
      </div>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ml-2 group-hover:transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </a>
  ) : <div></div>}
</nav>